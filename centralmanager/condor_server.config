
# Set COLLECTOR_HOST if collector's internal hostname doesn't match DNS name
# and also set sock=COLLECTOR if using shared port
# example:
#
MASTER_NAME = tylern
CONDOR_HOST = $(HOSTNAME).chn
COLLECTOR_HOST = $(CONDOR_HOST)?sock=collector

# SCRATCH_DIR=$ENV(SCRATCH:/pscratch/sd/t/tylern)

UPDATE_COLLECTOR_WITH_TCP = True
UPDATE_VIEW_COLLECTOR_WITH_TCP = True
WANT_UDP_COMMAND_SOCKET = False
COLLECTOR_MAX_FILE_DESCRIPTORS = 3000


UID_DOMAIN = tylern-condor
DAEMON_LIST = MASTER, COLLECTOR, NEGOTIATOR, SCHEDD
DISCARD_SESSION_KEYRING_ON_STARTUP = False

START = True
SUSPEND = False
PREEMPT = False
KILL = False


#SHARED_PORT_ARGS = -p 9625
USE_SHARED_PORT = TRUE


#STARTD_ATTRS = CLIENTGROUP

# CCB_ADDRESS = condor
# PRIVATE_NETWORK_NAME = login25.perlmutter.nersc.gov
PRIVATE_NETWORK_NAME = $(CONDOR_HOST)

SCRATCH_DIR = /global/cfs/cdirs/nstaff/tylern/htcondorscratch
HOME_DIR = $ENV(HOME:/global/homes/t/tylern)
LOCAL_DIR = $(SCRATCH_DIR)/$(HOSTNAME)
RELEASE_DIR = /global/common/software/m3792/alvarez/htcondor

HighLoad = 50

# NETWORK_INTERFACE = 128.55.64.34
NETWORK_INTERFACE = hsn0

FLOCK_FROM = *

SEC_DEFAULT_AUTHENTICATION = REQUIRED
#SEC_DEFAULT_AUTHENTICATION_METHODS = PASSWORD
SEC_DEFAULT_AUTHENTICATION_METHODS = PASSWORD, FS
SEC_CLIENT_AUTHENTICATION_METHODS = PASSWORD

SEC_DEFAULT_NEGOTIATION = REQUIRED

SEC_PASSWORD_FILE = $(HOME_DIR)/.condor/spin.password

ALLOW_READ = 128.55.*, 10.*
ALLOW_WRITE = 128.55.*, 10.*

ALLOW_ADVERTISE_STARTD = $(ALLOW_WRITE)
ALLOW_ADVERTISE_SCHEDD = $(ALLOW_WRITE)
ALLOW_WRITE_STARTD = $(ALLOW_WRITE)
ALLOW_READ_STARTD = $(ALLOW_WRITE)
ALLOW_WRITE_SCHEDD = $(ALLOW_WRITE)
ALLOW_READ_SCHEDD = $(ALLOW_WRITE)
ALLOW_ADVERTISE_MASTER = $(ALLOW_WRITE)

NEGOTIATOR.ALLOW_READ = $(ALLOW_READ)
NEGOTIATOR.ALLOW_WRITE = $(ALLOW_WRITE)


# Set this so that anonymous users (including SOAP users) can insert jobs into the queue
# QUEUE_ALL_USERS_TRUSTED = False
# Set anonymous users to map to the SCHEDD_NAME - kbase by default
# CONDOR_ANONYMOUS_USER = kbase

START = True

SEC_DAEMON_AUTHENTICATION = REQUIRED
SEC_DAEMON_INTEGRITY = REQUIRED
SEC_DAEMON_AUTHENTICATION_METHODS = PASSWORD
SEC_NEGOTIATOR_AUTHENTICATION = REQUIRED
SEC_NEGOTIATOR_INTEGRITY = REQUIRED
SEC_NEGOTIATOR_AUTHENTICATION_METHODS = PASSWORD
SEC_CLIENT_AUTHENTICATION_METHODS = PASSWORD
ALLOW_DAEMON = condor_pool@$(UID_DOMAIN)/*, \
               tylern@$(UID_DOMAIN)/$(IP_ADDRESS)
ALLOW_NEGOTIATOR = condor_pool@$(UID_DOMAIN)/*,tylern@$(UID_DOMAIN)/$(IP_ADDRESS)
ALLOW_COLLECTOR = condor_pool@$(UID_DOMAIN)/*,tylern@$(UID_DOMAIN)/$(IP_ADDRESS)
ALLOW_ADVERTISE_STARTD = condor_pool@$(UID_DOMAIN)/*,tylern@$(UID_DOMAIN)/$(IP_ADDRESS)

# Options for frequency of negotiation, and minimum time length of the negotiation cycle
NEGOTIATOR_INTERVAL = 5
NEGOTIATOR_CYCLE_DELAY = 5

CONCURRENCY_LIMIT_DEFAULT = 10

REMOVE_SIGNIFICANT_ATTRIBUTES = HEALTH_STATUS_MESSAGE

QUEUE_SUPER_USERS = root, condor, condor_pool, tylern
CONDOR_ADMIN = tylern@nersc.gov
#SCHEDD_DEBUG = D_FULLDEBUG

MAX_JOBS_PER_OWNER=1000000
MAX_JOB_QUEUE_LOG_ROTATIONS=5
QUEUE_CLEAN_INTERVAL=86400


SCHEDD_DEBUG = D_FULLDEBUG
COLLECTOR_DEBUG = D_FULLDEBUG
NEGOTIATOR_DEBUG = D_FULLDEBUG
MATCH_DEBUG = D_FULLDEBUG
SCHEDD_DEBUG = D_FULLDEBUG
